<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
    <title>JayStorm Get Started</title>
    
    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.rc.1/handlebars.min.js"></script>
    <script src="http://include.jaydata.org/datajs-1.0.3.min.js" type="text/javascript"></script>
    <script src="http://include.jaydata.org/jaydata.min.js" type="text/javascript"></script>
    <script src="http://include.jaydata.org/jaystorm-1.0.0.js"></script>
    <script src="http://include.jaydata.org/handlebars-adapter-0.9.0.js"></script> 

    <script>
        // this is your API key to access the pingpong service in the RNL Ping Pong application
        var apiKey = {
            ownerId: '99833845-15b4-46c1-8bcd-8efdff0cca8a',
            appId: '67328087-2d35-450f-a961-c08294e1bda1',
            serviceName: 'pingpong'
        };
        
        // initialize the connection to the pingpong service in the RNL Ping Pong application
        // credentials are optional, anonymous access used if omitted
        $data.initService(apiKey /*, credentials */).then(function(pingpong, factory, type){
            // "pingpong" is your data context
            // "factory" is a context factory method
            // "type" is your context type
            
            pingpong.Users
                .orderByDescending("it.score")
                .renderTo("#user-list");
            
            // get all data from the Users table
            /*pingpong.Users.toArray(function(result){
                // "result" is the actual data in a simple Array
                
                // add a new element to the Users table
                pingpong.Users.add({
                    name: <some value>,
                    score: <some value>
                });
                
                // we want to update the first element, so we attach it
                var updated = result[0];
                pingpong.Users.attach(updated);
                
                // and set the name field of the element
                updated.name = <some other value>;
                
                // remove the second element
                var removed = result[1];
                pingpong.Users.remove(removed);
                
                // after we create, update or remove an element
                // we have to call the "saveChanges" method
                // to send the modifications to the server
                pingpong.saveChanges(function(cnt){
                    // "cnt" is the number of elements successfully processed on the server on "saveChanges"
                    console.log(cnt + ' element changes processed and saved.');
                });
            });*/
        }).fail(function(err){
            console.error('Connection failed.');
            console.error(err);
        });
    </script>
</head>
<body>
    <h1>RNL Ping Pong rankings</h1>

    <ul id="user-list"></ul>

<script id="User" type="x-handlebars-template">
   <li class="user-item">
        <span>{{name}}</span> - {{score}}
   </li>
</script>

</body>
</html>